import{B as rt,S as ft,i as ct,s as _t,e as O,b as w,G,h as f,k as v,a as S,l as E,m as g,c as A,M as ht,N as X,O as pt,P as ut,q as k,r as T,F as u,u as M,n as z,Q as dt,w as bt,R as mt,x as vt,y as Et,f as gt,t as kt,z as Tt,H as Z,o as wt,T as x}from"../../chunks/index-1918b0bc.js";const yt=s=>{const l=s.split(`
`).map(e=>e.split(";")),t=l.shift();return l.filter(e=>e.length===t.length).map(e=>{let a={};return t.forEach((i,r)=>a[i]=e[r]),{name:a.name,artists:JSON.parse(a.artists.replaceAll("'",'"')),album_name:a.album_name,date:new Date(a.date),song_id:a.song_id,cover_url:a.cover_url,playlist:a.playlist,position:+a.position}})},Dt=async s=>{const t=await(await fetch(s)).text();return yt(t)};async function tt(s){const t=await(await fetch("https://api.github.com/repos/cristianpb/playlists/commits?sha=data")).json();return await Dt(`https://raw.githubusercontent.com/cristianpb/playlists/${t[s].sha}/data.csv`)}const J=rt([]),Q=rt([]);function et(s,l,t){const e=s.slice();return e[5]=l[t],e}function lt(s,l,t){const e=s.slice();return e[8]=l[t],e}function at(s){let l,t,e,a,i,r=s[1],o=[];for(let n=0;n<r.length;n+=1)o[n]=st(lt(s,r,n));let h=s[0].length>0&&it(s);return{c(){l=v("select");for(let n=0;n<o.length;n+=1)o[n].c();t=S(),h&&h.c(),e=O(),this.h()},l(n){l=E(n,"SELECT",{});var b=g(l);for(let c=0;c<o.length;c+=1)o[c].l(b);b.forEach(f),t=A(n),h&&h.l(n),e=O(),this.h()},h(){s[2]===void 0&&ht(()=>s[3].call(l))},m(n,b){w(n,l,b);for(let c=0;c<o.length;c+=1)o[c].m(l,null);X(l,s[2]),w(n,t,b),h&&h.m(n,b),w(n,e,b),a||(i=pt(l,"change",s[3]),a=!0)},p(n,b){if(b&2){r=n[1];let c;for(c=0;c<r.length;c+=1){const y=lt(n,r,c);o[c]?o[c].p(y,b):(o[c]=st(y),o[c].c(),o[c].m(l,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}b&6&&X(l,n[2]),n[0].length>0?h?h.p(n,b):(h=it(n),h.c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null)},d(n){n&&f(l),ut(o,n),n&&f(t),h&&h.d(n),n&&f(e),a=!1,i()}}}function st(s){let l,t=s[8]+"",e,a,i;return{c(){l=v("option"),e=k(t),a=S(),this.h()},l(r){l=E(r,"OPTION",{});var o=g(l);e=T(o,t),a=A(o),o.forEach(f),this.h()},h(){l.__value=i=s[8],l.value=l.__value},m(r,o){w(r,l,o),u(l,e),u(l,a)},p(r,o){o&2&&t!==(t=r[8]+"")&&M(e,t),o&2&&i!==(i=r[8])&&(l.__value=i,l.value=l.__value)},d(r){r&&f(l)}}}function it(s){let l,t,e,a,i,r,o,h,n,b,c,y,$,H,R,j,C,P,q,L,N=s[0],p=[];for(let _=0;_<N.length;_+=1)p[_]=ot(et(s,N,_));return{c(){l=v("div"),t=v("table"),e=v("thead"),a=v("tr"),i=v("th"),r=k("Name"),o=S(),h=v("th"),n=k("Artists"),b=S(),c=v("th"),y=k("Album"),$=S(),H=v("th"),R=k("Date"),j=S(),C=v("th"),P=k("Position"),q=S(),L=v("tbody");for(let _=0;_<p.length;_+=1)p[_].c();this.h()},l(_){l=E(_,"DIV",{class:!0});var d=g(l);t=E(d,"TABLE",{class:!0});var m=g(t);e=E(m,"THEAD",{});var B=g(e);a=E(B,"TR",{});var D=g(a);i=E(D,"TH",{});var U=g(i);r=T(U,"Name"),U.forEach(f),o=A(D),h=E(D,"TH",{});var V=g(h);n=T(V,"Artists"),V.forEach(f),b=A(D),c=E(D,"TH",{});var Y=g(c);y=T(Y,"Album"),Y.forEach(f),$=A(D),H=E(D,"TH",{});var I=g(H);R=T(I,"Date"),I.forEach(f),j=A(D),C=E(D,"TH",{});var K=g(C);P=T(K,"Position"),K.forEach(f),D.forEach(f),B.forEach(f),q=A(m),L=E(m,"TBODY",{});var W=g(L);for(let F=0;F<p.length;F+=1)p[F].l(W);W.forEach(f),m.forEach(f),d.forEach(f),this.h()},h(){z(t,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),z(l,"class","table-container")},m(_,d){w(_,l,d),u(l,t),u(t,e),u(e,a),u(a,i),u(i,r),u(a,o),u(a,h),u(h,n),u(a,b),u(a,c),u(c,y),u(a,$),u(a,H),u(H,R),u(a,j),u(a,C),u(C,P),u(t,q),u(t,L);for(let m=0;m<p.length;m+=1)p[m].m(L,null)},p(_,d){if(d&5){N=_[0];let m;for(m=0;m<N.length;m+=1){const B=et(_,N,m);p[m]?p[m].p(B,d):(p[m]=ot(B),p[m].c(),p[m].m(L,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=N.length}},d(_){_&&f(l),ut(p,_)}}}function nt(s){let l,t,e=s[5].name+"",a,i,r,o=s[5].artists.join(", ")+"",h,n,b,c=s[5].album_name+"",y,$,H,R=s[5].date.toLocaleDateString("en-US")+"",j,C,P,q;function L(_,d){return _[5].attribute=="+"?Pt:_[5].attribute=="-"?Nt:_[5].attribute>0?Ht:_[5].attribute==0?At:St}let N=L(s),p=N(s);return{c(){l=v("tr"),t=v("td"),a=k(e),i=S(),r=v("td"),h=k(o),n=S(),b=v("td"),y=k(c),$=S(),H=v("td"),j=k(R),C=S(),P=v("td"),p.c(),q=S()},l(_){l=E(_,"TR",{});var d=g(l);t=E(d,"TD",{});var m=g(t);a=T(m,e),m.forEach(f),i=A(d),r=E(d,"TD",{});var B=g(r);h=T(B,o),B.forEach(f),n=A(d),b=E(d,"TD",{});var D=g(b);y=T(D,c),D.forEach(f),$=A(d),H=E(d,"TD",{});var U=g(H);j=T(U,R),U.forEach(f),C=A(d),P=E(d,"TD",{});var V=g(P);p.l(V),V.forEach(f),q=A(d),d.forEach(f)},m(_,d){w(_,l,d),u(l,t),u(t,a),u(l,i),u(l,r),u(r,h),u(l,n),u(l,b),u(b,y),u(l,$),u(l,H),u(H,j),u(l,C),u(l,P),p.m(P,null),u(l,q)},p(_,d){d&1&&e!==(e=_[5].name+"")&&M(a,e),d&1&&o!==(o=_[5].artists.join(", ")+"")&&M(h,o),d&1&&c!==(c=_[5].album_name+"")&&M(y,c),d&1&&R!==(R=_[5].date.toLocaleDateString("en-US")+"")&&M(j,R),N===(N=L(_))&&p?p.p(_,d):(p.d(1),p=N(_),p&&(p.c(),p.m(P,null)))},d(_){_&&f(l),p.d()}}}function St(s){let l,t=Math.abs(s[5].attribute)+"",e;return{c(){l=k("\u2B07 "),e=k(t)},l(a){l=T(a,"\u2B07 "),e=T(a,t)},m(a,i){w(a,l,i),w(a,e,i)},p(a,i){i&1&&t!==(t=Math.abs(a[5].attribute)+"")&&M(e,t)},d(a){a&&f(l),a&&f(e)}}}function At(s){let l=s[5].position+"",t;return{c(){t=k(l)},l(e){t=T(e,l)},m(e,a){w(e,t,a)},p(e,a){a&1&&l!==(l=e[5].position+"")&&M(t,l)},d(e){e&&f(t)}}}function Ht(s){let l,t=s[5].attribute+"",e;return{c(){l=k("\u2B06 "),e=k(t)},l(a){l=T(a,"\u2B06 "),e=T(a,t)},m(a,i){w(a,l,i),w(a,e,i)},p(a,i){i&1&&t!==(t=a[5].attribute+"")&&M(e,t)},d(a){a&&f(l),a&&f(e)}}}function Nt(s){let l,t=s[5].position+"",e;return{c(){l=k("\u{1F5D1} "),e=k(t)},l(a){l=T(a,"\u{1F5D1} "),e=T(a,t)},m(a,i){w(a,l,i),w(a,e,i)},p(a,i){i&1&&t!==(t=a[5].position+"")&&M(e,t)},d(a){a&&f(l),a&&f(e)}}}function Pt(s){let l,t=s[5].position+"",e;return{c(){l=k("\u{1F195} "),e=k(t)},l(a){l=T(a,"\u{1F195} "),e=T(a,t)},m(a,i){w(a,l,i),w(a,e,i)},p(a,i){i&1&&t!==(t=a[5].position+"")&&M(e,t)},d(a){a&&f(l),a&&f(e)}}}function ot(s){let l,t=s[5].playlist===s[2]&&nt(s);return{c(){t&&t.c(),l=O()},l(e){t&&t.l(e),l=O()},m(e,a){t&&t.m(e,a),w(e,l,a)},p(e,a){e[5].playlist===e[2]?t?t.p(e,a):(t=nt(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&f(l)}}}function Mt(s){let l,t=s[0]&&s[0].length>0&&s[1].length>0&&at(s);return{c(){t&&t.c(),l=O()},l(e){t&&t.l(e),l=O()},m(e,a){t&&t.m(e,a),w(e,l,a)},p(e,[a]){e[0]&&e[0].length>0&&e[1].length>0?t?t.p(e,a):(t=at(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:G,o:G,d(e){t&&t.d(e),e&&f(l)}}}function Rt(s,l,t){let e=[],a=[],i;J.subscribe(o=>{Q.subscribe(h=>{o.length>0&&h.length>0&&(t(0,e=[]),o.forEach((n,b)=>{h.forEach((c,y)=>{n.playlist==c.playlist&&n.song_id===c.song_id&&(o[b].attribute=c.position-n.position,h[y].attribute=n.position-c.position)})}),o.forEach(n=>{"attribute"in n?t(0,e=[...e,n]):t(0,e=[...e,{...n,attribute:"+"}])}),h.forEach(n=>{"attribute"in n||t(0,e=[...e,{...n,attribute:"-"}])}),t(1,a=[...new Set(o.map(n=>n.playlist))]))})});function r(){i=dt(this),t(2,i),t(1,a)}return[e,a,i,r]}class Ct extends ft{constructor(l){super(),ct(this,l,Rt,Mt,_t,{})}}function Lt(s){let l,t,e,a,i;return a=new Ct({}),{c(){l=v("meta"),t=S(),e=v("div"),bt(a.$$.fragment),this.h()},l(r){const o=mt("svelte-pm5yr4",document.head);l=E(o,"META",{name:!0,content:!0}),o.forEach(f),t=A(r),e=E(r,"DIV",{class:!0});var h=g(e);vt(a.$$.fragment,h),h.forEach(f),this.h()},h(){document.title="Playlists",z(l,"name","description"),z(l,"content","Playlists app"),z(e,"class","app")},m(r,o){u(document.head,l),w(r,t,o),w(r,e,o),Et(a,e,null),i=!0},p:G,i(r){i||(gt(a.$$.fragment,r),i=!0)},o(r){kt(a.$$.fragment,r),i=!1},d(r){f(l),r&&f(t),r&&f(e),Tt(a)}}}function jt(s,l,t){let e,a;return Z(s,Q,i=>t(0,e=i)),Z(s,J,i=>t(1,a=i)),wt(async()=>{x(J,a=await tt(0),a),x(Q,e=await tt(1),e)}),[]}class $t extends ft{constructor(l){super(),ct(this,l,jt,Lt,_t,{})}}export{$t as default};

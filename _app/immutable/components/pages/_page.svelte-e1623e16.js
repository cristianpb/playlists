import{B as ot,S as rt,i as ft,s as ct,a as D,e as V,c as N,b as g,G as F,h as c,H as Q,M as Y,k as m,l as b,m as v,N as ut,O as x,P as ht,Q as _t,q as k,r as T,F as f,n as U,R as dt,u as $,w as pt,T as mt,x as bt,y as vt,f as Et,t as kt,z as Tt,o as gt}from"../../chunks/index-55bdb6f8.js";const wt=n=>{const e=n.split(`
`).map(l=>l.split(";")),a=e.shift();return e.filter(l=>l.length===a.length).map(l=>{let t={};return a.forEach((s,i)=>t[s]=l[i]),{name:t.name,artists:JSON.parse(t.artists.replaceAll("'",'"')),album_name:t.album_name,date:new Date(t.date),song_id:t.song_id,cover_url:t.cover_url,playlist:t.playlist,position:+t.position}})},tt=async n=>{const a=await(await fetch(n)).text();return wt(a)},I=ot([]),G=ot([]);function et(n,e,a){const l=n.slice();return l[6]=e[a],l}function lt(n,e,a){const l=n.slice();return l[9]=e[a],l}function yt(n){let e,a,l,t=[...n[2]],s=[];for(let i=0;i<t.length;i+=1)s[i]=at(lt(n,t,i));return{c(){e=m("select");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=b(i,"SELECT",{});var h=v(e);for(let o=0;o<s.length;o+=1)s[o].l(h);h.forEach(c),this.h()},h(){n[1]===void 0&&ut(()=>n[3].call(e))},m(i,h){g(i,e,h);for(let o=0;o<s.length;o+=1)s[o].m(e,null);x(e,n[1]),a||(l=ht(e,"change",n[3]),a=!0)},p(i,h){if(h&4){t=[...i[2]];let o;for(o=0;o<t.length;o+=1){const p=lt(i,t,o);s[o]?s[o].p(p,h):(s[o]=at(p),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}h&6&&x(e,i[1])},d(i){i&&c(e),_t(s,i),a=!1,l()}}}function at(n){let e,a=n[9]+"",l,t;return{c(){e=m("option"),l=k(a),t=D(),this.h()},l(s){e=b(s,"OPTION",{});var i=v(e);l=T(i,a),t=N(i),i.forEach(c),this.h()},h(){e.__value=n[9],e.value=e.__value},m(s,i){g(s,e,i),f(e,l),f(e,t)},p:F,d(s){s&&c(e)}}}function st(n){let e,a,l,t,s,i,h,o,p,S,E,O,B,A,P,L,R,H,M,C,w=n[0],_=[];for(let r=0;r<w.length;r+=1)_[r]=nt(et(n,w,r));return{c(){e=m("div"),a=m("table"),l=m("thead"),t=m("tr"),s=m("th"),i=k("Name"),h=D(),o=m("th"),p=k("Artists"),S=D(),E=m("th"),O=k("Album"),B=D(),A=m("th"),P=k("Date"),L=D(),R=m("th"),H=k("Position"),M=D(),C=m("tbody");for(let r=0;r<_.length;r+=1)_[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var u=v(e);a=b(u,"TABLE",{class:!0});var d=v(a);l=b(d,"THEAD",{});var z=v(l);t=b(z,"TR",{});var y=v(t);s=b(y,"TH",{});var j=v(s);i=T(j,"Name"),j.forEach(c),h=N(y),o=b(y,"TH",{});var q=v(o);p=T(q,"Artists"),q.forEach(c),S=N(y),E=b(y,"TH",{});var K=v(E);O=T(K,"Album"),K.forEach(c),B=N(y),A=b(y,"TH",{});var W=v(A);P=T(W,"Date"),W.forEach(c),L=N(y),R=b(y,"TH",{});var X=v(R);H=T(X,"Position"),X.forEach(c),y.forEach(c),z.forEach(c),M=N(d),C=b(d,"TBODY",{});var Z=v(C);for(let J=0;J<_.length;J+=1)_[J].l(Z);Z.forEach(c),d.forEach(c),u.forEach(c),this.h()},h(){U(a,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),U(e,"class","table-container")},m(r,u){g(r,e,u),f(e,a),f(a,l),f(l,t),f(t,s),f(s,i),f(t,h),f(t,o),f(o,p),f(t,S),f(t,E),f(E,O),f(t,B),f(t,A),f(A,P),f(t,L),f(t,R),f(R,H),f(a,M),f(a,C);for(let d=0;d<_.length;d+=1)_[d].m(C,null)},p(r,u){if(u&3){w=r[0];let d;for(d=0;d<w.length;d+=1){const z=et(r,w,d);_[d]?_[d].p(z,u):(_[d]=nt(z),_[d].c(),_[d].m(C,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=w.length}},d(r){r&&c(e),_t(_,r)}}}function it(n){let e,a,l=n[6].name+"",t,s,i,h=n[6].artists.join(", ")+"",o,p,S,E=n[6].album_name+"",O,B,A,P=n[6].date.toLocaleDateString("en-US")+"",L,R,H,M;function C(r,u){if(r[6].attribute=="+")return St;if(r[6].attribute=="-")return Nt;if(r[6].attribute!==0)return Dt}let w=C(n),_=w&&w(n);return{c(){e=m("tr"),a=m("td"),t=k(l),s=D(),i=m("td"),o=k(h),p=D(),S=m("td"),O=k(E),B=D(),A=m("td"),L=k(P),R=D(),H=m("td"),_&&_.c(),M=D()},l(r){e=b(r,"TR",{});var u=v(e);a=b(u,"TD",{});var d=v(a);t=T(d,l),d.forEach(c),s=N(u),i=b(u,"TD",{});var z=v(i);o=T(z,h),z.forEach(c),p=N(u),S=b(u,"TD",{});var y=v(S);O=T(y,E),y.forEach(c),B=N(u),A=b(u,"TD",{});var j=v(A);L=T(j,P),j.forEach(c),R=N(u),H=b(u,"TD",{});var q=v(H);_&&_.l(q),q.forEach(c),M=N(u),u.forEach(c)},m(r,u){g(r,e,u),f(e,a),f(a,t),f(e,s),f(e,i),f(i,o),f(e,p),f(e,S),f(S,O),f(e,B),f(e,A),f(A,L),f(e,R),f(e,H),_&&_.m(H,null),f(e,M)},p(r,u){u&1&&l!==(l=r[6].name+"")&&$(t,l),u&1&&h!==(h=r[6].artists.join(", ")+"")&&$(o,h),u&1&&E!==(E=r[6].album_name+"")&&$(O,E),u&1&&P!==(P=r[6].date.toLocaleDateString("en-US")+"")&&$(L,P),w===(w=C(r))&&_?_.p(r,u):(_&&_.d(1),_=w&&w(r),_&&(_.c(),_.m(H,null)))},d(r){r&&c(e),_&&_.d()}}}function Dt(n){let e=n[6].attribute+"",a;return{c(){a=k(e)},l(l){a=T(l,e)},m(l,t){g(l,a,t)},p(l,t){t&1&&e!==(e=l[6].attribute+"")&&$(a,e)},d(l){l&&c(a)}}}function Nt(n){let e,a=n[6].attribute+"",l;return{c(){e=k("Out! "),l=k(a)},l(t){e=T(t,"Out! "),l=T(t,a)},m(t,s){g(t,e,s),g(t,l,s)},p(t,s){s&1&&a!==(a=t[6].attribute+"")&&$(l,a)},d(t){t&&c(e),t&&c(l)}}}function St(n){let e,a=n[6].position+"",l;return{c(){e=k("New! "),l=k(a)},l(t){e=T(t,"New! "),l=T(t,a)},m(t,s){g(t,e,s),g(t,l,s)},p(t,s){s&1&&a!==(a=t[6].position+"")&&$(l,a)},d(t){t&&c(e),t&&c(l)}}}function nt(n){let e,a=n[6].playlist===n[1]&&it(n);return{c(){a&&a.c(),e=V()},l(l){a&&a.l(l),e=V()},m(l,t){a&&a.m(l,t),g(l,e,t)},p(l,t){l[6].playlist===l[1]?a?a.p(l,t):(a=it(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(l){a&&a.d(l),l&&c(e)}}}function At(n){let e,a,l=n[2]&&n[2].size>0&&yt(n),t=n[0]&&st(n);return{c(){l&&l.c(),e=D(),t&&t.c(),a=V()},l(s){l&&l.l(s),e=N(s),t&&t.l(s),a=V()},m(s,i){l&&l.m(s,i),g(s,e,i),t&&t.m(s,i),g(s,a,i)},p(s,[i]){s[2]&&s[2].size>0&&l.p(s,i),s[0]?t?t.p(s,i):(t=st(s),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},i:F,o:F,d(s){l&&l.d(s),s&&c(e),t&&t.d(s),s&&c(a)}}}function Ot(n,e,a){let l;Q(n,G,o=>a(4,l=o));let t=[],s=new Set,i;I.subscribe(o=>{o.forEach((p,S)=>{l.forEach((E,O)=>{p.playlist==E.playlist&&p.song_id===E.song_id&&(o[S].attribute=p.position-E.position,Y(G,l[O].attribute=p.position-E.position,l))})}),o.forEach(p=>{"attribute"in p?a(0,t=[...t,p]):a(0,t=[...t,{...p,attribute:"+"}]),s.add(p.playlist)}),l.forEach(p=>{"attribute"in p||a(0,t=[...t,{...p,attribute:"-"}])})});function h(){i=dt(this),a(1,i),a(2,s)}return[t,i,s,h]}class Ht extends rt{constructor(e){super(),ft(this,e,Ot,At,ct,{})}}function Pt(n){let e,a,l,t,s;return t=new Ht({}),{c(){e=m("meta"),a=D(),l=m("div"),pt(t.$$.fragment),this.h()},l(i){const h=mt("svelte-pm5yr4",document.head);e=b(h,"META",{name:!0,content:!0}),h.forEach(c),a=N(i),l=b(i,"DIV",{class:!0});var o=v(l);bt(t.$$.fragment,o),o.forEach(c),this.h()},h(){document.title="Playlists",U(e,"name","description"),U(e,"content","Playlists app"),U(l,"class","app")},m(i,h){f(document.head,e),g(i,a,h),g(i,l,h),vt(t,l,null),s=!0},p:F,i(i){s||(Et(t.$$.fragment,i),s=!0)},o(i){kt(t.$$.fragment,i),s=!1},d(i){c(e),i&&c(a),i&&c(l),Tt(t)}}}function Rt(n,e,a){let l,t;return Q(n,G,s=>a(0,l=s)),Q(n,I,s=>a(1,t=s)),gt(async()=>{Y(I,t=await tt("data.csv"),t),Y(G,l=await tt("dataOld.csv"),l)}),[]}class Lt extends rt{constructor(e){super(),ft(this,e,Rt,Pt,ct,{})}}export{Lt as default};

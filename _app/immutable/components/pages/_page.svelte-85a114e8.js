import{B as st,S as nt,i as rt,s as ft,a as w,e as V,c as H,b as g,G as F,h as c,H as Y,M as I,k as b,l as m,m as v,N as _t,O as x,P as ut,Q as ct,q as k,r as T,F as f,n as U,R as ht,u as j,w as dt,T as pt,x as bt,y as mt,f as vt,t as Et,z as kt,o as Tt}from"../../chunks/index-55bdb6f8.js";const J=st([]),G=st([]);function tt(s,e,a){const l=s.slice();return l[6]=e[a],l}function et(s,e,a){const l=s.slice();return l[9]=e[a],l}function gt(s){let e,a,l,t=[...s[2]],i=[];for(let o=0;o<t.length;o+=1)i[o]=lt(et(s,t,o));return{c(){e=b("select");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=m(o,"SELECT",{});var h=v(e);for(let n=0;n<i.length;n+=1)i[n].l(h);h.forEach(c),this.h()},h(){s[1]===void 0&&_t(()=>s[3].call(e))},m(o,h){g(o,e,h);for(let n=0;n<i.length;n+=1)i[n].m(e,null);x(e,s[1]),a||(l=ut(e,"change",s[3]),a=!0)},p(o,h){if(h&4){t=[...o[2]];let n;for(n=0;n<t.length;n+=1){const p=et(o,t,n);i[n]?i[n].p(p,h):(i[n]=lt(p),i[n].c(),i[n].m(e,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=t.length}h&6&&x(e,o[1])},d(o){o&&c(e),ct(i,o),a=!1,l()}}}function lt(s){let e,a=s[9]+"",l,t;return{c(){e=b("option"),l=k(a),t=w(),this.h()},l(i){e=m(i,"OPTION",{});var o=v(e);l=T(o,a),t=H(o),o.forEach(c),this.h()},h(){e.__value=s[9],e.value=e.__value},m(i,o){g(i,e,o),f(e,l),f(e,t)},p:F,d(i){i&&c(e)}}}function at(s){let e,a,l,t,i,o,h,n,p,N,E,A,M,S,O,z,L,P,$,R,y=s[0],_=[];for(let r=0;r<y.length;r+=1)_[r]=ot(tt(s,y,r));return{c(){e=b("div"),a=b("table"),l=b("thead"),t=b("tr"),i=b("th"),o=k("Name"),h=w(),n=b("th"),p=k("Artists"),N=w(),E=b("th"),A=k("Album"),M=w(),S=b("th"),O=k("Date"),z=w(),L=b("th"),P=k("Position"),$=w(),R=b("tbody");for(let r=0;r<_.length;r+=1)_[r].c();this.h()},l(r){e=m(r,"DIV",{class:!0});var u=v(e);a=m(u,"TABLE",{class:!0});var d=v(a);l=m(d,"THEAD",{});var B=v(l);t=m(B,"TR",{});var D=v(t);i=m(D,"TH",{});var q=v(i);o=T(q,"Name"),q.forEach(c),h=H(D),n=m(D,"TH",{});var C=v(n);p=T(C,"Artists"),C.forEach(c),N=H(D),E=m(D,"TH",{});var K=v(E);A=T(K,"Album"),K.forEach(c),M=H(D),S=m(D,"TH",{});var W=v(S);O=T(W,"Date"),W.forEach(c),z=H(D),L=m(D,"TH",{});var X=v(L);P=T(X,"Position"),X.forEach(c),D.forEach(c),B.forEach(c),$=H(d),R=m(d,"TBODY",{});var Z=v(R);for(let Q=0;Q<_.length;Q+=1)_[Q].l(Z);Z.forEach(c),d.forEach(c),u.forEach(c),this.h()},h(){U(a,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),U(e,"class","table-container")},m(r,u){g(r,e,u),f(e,a),f(a,l),f(l,t),f(t,i),f(i,o),f(t,h),f(t,n),f(n,p),f(t,N),f(t,E),f(E,A),f(t,M),f(t,S),f(S,O),f(t,z),f(t,L),f(L,P),f(a,$),f(a,R);for(let d=0;d<_.length;d+=1)_[d].m(R,null)},p(r,u){if(u&3){y=r[0];let d;for(d=0;d<y.length;d+=1){const B=tt(r,y,d);_[d]?_[d].p(B,u):(_[d]=ot(B),_[d].c(),_[d].m(R,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=y.length}},d(r){r&&c(e),ct(_,r)}}}function it(s){let e,a,l=s[6].name+"",t,i,o,h=s[6].artists.join(", ")+"",n,p,N,E=s[6].album_name+"",A,M,S,O=s[6].date.toLocaleDateString("en-US")+"",z,L,P,$;function R(r,u){if(r[6].attribute=="+")return wt;if(r[6].attribute=="-")return Dt;if(r[6].attribute!==0)return yt}let y=R(s),_=y&&y(s);return{c(){e=b("tr"),a=b("td"),t=k(l),i=w(),o=b("td"),n=k(h),p=w(),N=b("td"),A=k(E),M=w(),S=b("td"),z=k(O),L=w(),P=b("td"),_&&_.c(),$=w()},l(r){e=m(r,"TR",{});var u=v(e);a=m(u,"TD",{});var d=v(a);t=T(d,l),d.forEach(c),i=H(u),o=m(u,"TD",{});var B=v(o);n=T(B,h),B.forEach(c),p=H(u),N=m(u,"TD",{});var D=v(N);A=T(D,E),D.forEach(c),M=H(u),S=m(u,"TD",{});var q=v(S);z=T(q,O),q.forEach(c),L=H(u),P=m(u,"TD",{});var C=v(P);_&&_.l(C),C.forEach(c),$=H(u),u.forEach(c)},m(r,u){g(r,e,u),f(e,a),f(a,t),f(e,i),f(e,o),f(o,n),f(e,p),f(e,N),f(N,A),f(e,M),f(e,S),f(S,z),f(e,L),f(e,P),_&&_.m(P,null),f(e,$)},p(r,u){u&1&&l!==(l=r[6].name+"")&&j(t,l),u&1&&h!==(h=r[6].artists.join(", ")+"")&&j(n,h),u&1&&E!==(E=r[6].album_name+"")&&j(A,E),u&1&&O!==(O=r[6].date.toLocaleDateString("en-US")+"")&&j(z,O),y===(y=R(r))&&_?_.p(r,u):(_&&_.d(1),_=y&&y(r),_&&(_.c(),_.m(P,null)))},d(r){r&&c(e),_&&_.d()}}}function yt(s){let e=s[6].attribute+"",a;return{c(){a=k(e)},l(l){a=T(l,e)},m(l,t){g(l,a,t)},p(l,t){t&1&&e!==(e=l[6].attribute+"")&&j(a,e)},d(l){l&&c(a)}}}function Dt(s){let e,a=s[6].attribute+"",l;return{c(){e=k("Out! "),l=k(a)},l(t){e=T(t,"Out! "),l=T(t,a)},m(t,i){g(t,e,i),g(t,l,i)},p(t,i){i&1&&a!==(a=t[6].attribute+"")&&j(l,a)},d(t){t&&c(e),t&&c(l)}}}function wt(s){let e,a=s[6].position+"",l;return{c(){e=k("New! "),l=k(a)},l(t){e=T(t,"New! "),l=T(t,a)},m(t,i){g(t,e,i),g(t,l,i)},p(t,i){i&1&&a!==(a=t[6].position+"")&&j(l,a)},d(t){t&&c(e),t&&c(l)}}}function ot(s){let e,a=s[6].playlist===s[1]&&it(s);return{c(){a&&a.c(),e=V()},l(l){a&&a.l(l),e=V()},m(l,t){a&&a.m(l,t),g(l,e,t)},p(l,t){l[6].playlist===l[1]?a?a.p(l,t):(a=it(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(l){a&&a.d(l),l&&c(e)}}}function Ht(s){let e,a,l=s[2]&&s[2].size>0&&gt(s),t=s[0]&&at(s);return{c(){l&&l.c(),e=w(),t&&t.c(),a=V()},l(i){l&&l.l(i),e=H(i),t&&t.l(i),a=V()},m(i,o){l&&l.m(i,o),g(i,e,o),t&&t.m(i,o),g(i,a,o)},p(i,[o]){i[2]&&i[2].size>0&&l.p(i,o),i[0]?t?t.p(i,o):(t=at(i),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},i:F,o:F,d(i){l&&l.d(i),i&&c(e),t&&t.d(i),i&&c(a)}}}function Nt(s,e,a){let l;Y(s,G,n=>a(4,l=n));let t=[],i=new Set,o;J.subscribe(n=>{n.forEach((p,N)=>{l.forEach((E,A)=>{p.playlist==E.playlist&&p.song_id===E.song_id&&(n[N].attribute=p.position-E.position,I(G,l[A].attribute=p.position-E.position,l))})}),n.forEach(p=>{"attribute"in p?a(0,t=[...t,p]):a(0,t=[...t,{...p,attribute:"+"}]),i.add(p.playlist)}),l.forEach(p=>{"attribute"in p||a(0,t=[...t,{...p,attribute:"-"}])})});function h(){o=ht(this),a(1,o),a(2,i)}return[t,o,i,h]}class St extends nt{constructor(e){super(),rt(this,e,Nt,Ht,ft,{})}}function At(s){let e,a,l,t,i;return t=new St({}),{c(){e=b("meta"),a=w(),l=b("div"),dt(t.$$.fragment),this.h()},l(o){const h=pt("svelte-pm5yr4",document.head);e=m(h,"META",{name:!0,content:!0}),h.forEach(c),a=H(o),l=m(o,"DIV",{class:!0});var n=v(l);bt(t.$$.fragment,n),n.forEach(c),this.h()},h(){document.title="Playlists",U(e,"name","description"),U(e,"content","Playlists app"),U(l,"class","app")},m(o,h){f(document.head,e),g(o,a,h),g(o,l,h),mt(t,l,null),i=!0},p:F,i(o){i||(vt(t.$$.fragment,o),i=!0)},o(o){Et(t.$$.fragment,o),i=!1},d(o){c(e),o&&c(a),o&&c(l),kt(t)}}}function Pt(s,e,a){let l,t;return Y(s,G,i=>a(0,l=i)),Y(s,J,i=>a(1,t=i)),Tt(async()=>{I(J,t=await fetchHistory(0),t),I(G,l=await fetchHistory(1),l)}),[]}class Lt extends nt{constructor(e){super(),rt(this,e,Pt,At,ft,{})}}export{Lt as default};

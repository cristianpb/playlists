import{B as rt,S as ft,i as ct,s as ut,e as q,b as y,G as I,h as n,H as J,k as D,a as M,q as k,l as S,m as L,c as R,r as T,M as ht,N as $,F as f,O as pt,u as j,P as _t,n as G,Q as dt,w as mt,R as bt,x as vt,y as Et,f as gt,t as kt,z as Tt,o as wt,T as x}from"../../chunks/index-1918b0bc.js";const Dt=o=>{const l=o.split(`
`).map(e=>e.split(";")),t=l.shift();return l.filter(e=>e.length===t.length).map(e=>{let a={};return t.forEach((i,r)=>a[i]=e[r]),{name:a.name,artists:JSON.parse(a.artists.replaceAll("'",'"')),album_name:a.album_name,date:new Date(a.date),song_id:a.song_id,cover_url:a.cover_url,playlist:a.playlist,position:+a.position}})},St=async o=>{const t=await(await fetch(o)).text();return Dt(t)};async function tt(o){const t=await(await fetch("https://api.github.com/repos/cristianpb/playlists/commits?sha=data")).json(),e=new Date(t[o].commit.author.date),a=await St(`https://raw.githubusercontent.com/cristianpb/playlists/${t[o].sha}/data.csv`);return{commitDate:e,data:a}}const O=rt(null),Q=rt(null);function et(o,l,t){const e=o.slice();return e[7]=l[t],e}function lt(o,l,t){const e=o.slice();return e[10]=l[t],e}function at(o){let l,t,e,a,i=o[3].commitDate.toLocaleDateString("en-US")+"",r,u,w=o[4].commitDate.toLocaleDateString("en-US")+"",E,A,_,U,P,H=o[1],b=[];for(let s=0;s<H.length;s+=1)b[s]=ot(lt(o,H,s));let v=o[0].length>0&&it(o);return{c(){l=D("select");for(let s=0;s<b.length;s+=1)b[s].c();t=M(),e=D("p"),a=k("From: "),r=k(i),u=k(" to: "),E=k(w),A=M(),v&&v.c(),_=q(),this.h()},l(s){l=S(s,"SELECT",{});var m=L(l);for(let N=0;N<b.length;N+=1)b[N].l(m);m.forEach(n),t=R(s),e=S(s,"P",{});var h=L(e);a=T(h,"From: "),r=T(h,i),u=T(h," to: "),E=T(h,w),h.forEach(n),A=R(s),v&&v.l(s),_=q(),this.h()},h(){o[2]===void 0&&ht(()=>o[5].call(l))},m(s,m){y(s,l,m);for(let h=0;h<b.length;h+=1)b[h].m(l,null);$(l,o[2]),y(s,t,m),y(s,e,m),f(e,a),f(e,r),f(e,u),f(e,E),y(s,A,m),v&&v.m(s,m),y(s,_,m),U||(P=pt(l,"change",o[5]),U=!0)},p(s,m){if(m&2){H=s[1];let h;for(h=0;h<H.length;h+=1){const N=lt(s,H,h);b[h]?b[h].p(N,m):(b[h]=ot(N),b[h].c(),b[h].m(l,null))}for(;h<b.length;h+=1)b[h].d(1);b.length=H.length}m&6&&$(l,s[2]),m&8&&i!==(i=s[3].commitDate.toLocaleDateString("en-US")+"")&&j(r,i),m&16&&w!==(w=s[4].commitDate.toLocaleDateString("en-US")+"")&&j(E,w),s[0].length>0?v?v.p(s,m):(v=it(s),v.c(),v.m(_.parentNode,_)):v&&(v.d(1),v=null)},d(s){s&&n(l),_t(b,s),s&&n(t),s&&n(e),s&&n(A),v&&v.d(s),s&&n(_),U=!1,P()}}}function ot(o){let l,t=o[10]+"",e,a,i;return{c(){l=D("option"),e=k(t),a=M(),this.h()},l(r){l=S(r,"OPTION",{});var u=L(l);e=T(u,t),a=R(u),u.forEach(n),this.h()},h(){l.__value=i=o[10],l.value=l.__value},m(r,u){y(r,l,u),f(l,e),f(l,a)},p(r,u){u&2&&t!==(t=r[10]+"")&&j(e,t),u&2&&i!==(i=r[10])&&(l.__value=i,l.value=l.__value)},d(r){r&&n(l)}}}function it(o){let l,t,e,a,i,r,u,w,E,A,_,U,P,H,b,v,s,m,h,N,B=o[0],p=[];for(let c=0;c<B.length;c+=1)p[c]=nt(et(o,B,c));return{c(){l=D("div"),t=D("table"),e=D("thead"),a=D("tr"),i=D("th"),r=k("Name"),u=M(),w=D("th"),E=k("Artists"),A=M(),_=D("th"),U=k("Album"),P=M(),H=D("th"),b=k("Date"),v=M(),s=D("th"),m=k("Position"),h=M(),N=D("tbody");for(let c=0;c<p.length;c+=1)p[c].c();this.h()},l(c){l=S(c,"DIV",{class:!0});var d=L(l);t=S(d,"TABLE",{class:!0});var g=L(t);e=S(g,"THEAD",{});var F=L(e);a=S(F,"TR",{});var C=L(a);i=S(C,"TH",{});var V=L(i);r=T(V,"Name"),V.forEach(n),u=R(C),w=S(C,"TH",{});var z=L(w);E=T(z,"Artists"),z.forEach(n),A=R(C),_=S(C,"TH",{});var K=L(_);U=T(K,"Album"),K.forEach(n),P=R(C),H=S(C,"TH",{});var W=L(H);b=T(W,"Date"),W.forEach(n),v=R(C),s=S(C,"TH",{});var X=L(s);m=T(X,"Position"),X.forEach(n),C.forEach(n),F.forEach(n),h=R(g),N=S(g,"TBODY",{});var Z=L(N);for(let Y=0;Y<p.length;Y+=1)p[Y].l(Z);Z.forEach(n),g.forEach(n),d.forEach(n),this.h()},h(){G(t,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),G(l,"class","table-container")},m(c,d){y(c,l,d),f(l,t),f(t,e),f(e,a),f(a,i),f(i,r),f(a,u),f(a,w),f(w,E),f(a,A),f(a,_),f(_,U),f(a,P),f(a,H),f(H,b),f(a,v),f(a,s),f(s,m),f(t,h),f(t,N);for(let g=0;g<p.length;g+=1)p[g].m(N,null)},p(c,d){if(d&5){B=c[0];let g;for(g=0;g<B.length;g+=1){const F=et(c,B,g);p[g]?p[g].p(F,d):(p[g]=nt(F),p[g].c(),p[g].m(N,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=B.length}},d(c){c&&n(l),_t(p,c)}}}function st(o){let l,t,e=o[7].name+"",a,i,r,u=o[7].artists.join(", ")+"",w,E,A,_=o[7].album_name+"",U,P,H,b=o[7].date.toLocaleDateString("en-US")+"",v,s,m,h;function N(c,d){return c[7].attribute=="+"?Nt:c[7].attribute=="-"?Lt:c[7].attribute>0?Ht:c[7].attribute==0?At:yt}let B=N(o),p=B(o);return{c(){l=D("tr"),t=D("td"),a=k(e),i=M(),r=D("td"),w=k(u),E=M(),A=D("td"),U=k(_),P=M(),H=D("td"),v=k(b),s=M(),m=D("td"),p.c(),h=M()},l(c){l=S(c,"TR",{});var d=L(l);t=S(d,"TD",{});var g=L(t);a=T(g,e),g.forEach(n),i=R(d),r=S(d,"TD",{});var F=L(r);w=T(F,u),F.forEach(n),E=R(d),A=S(d,"TD",{});var C=L(A);U=T(C,_),C.forEach(n),P=R(d),H=S(d,"TD",{});var V=L(H);v=T(V,b),V.forEach(n),s=R(d),m=S(d,"TD",{});var z=L(m);p.l(z),z.forEach(n),h=R(d),d.forEach(n)},m(c,d){y(c,l,d),f(l,t),f(t,a),f(l,i),f(l,r),f(r,w),f(l,E),f(l,A),f(A,U),f(l,P),f(l,H),f(H,v),f(l,s),f(l,m),p.m(m,null),f(l,h)},p(c,d){d&1&&e!==(e=c[7].name+"")&&j(a,e),d&1&&u!==(u=c[7].artists.join(", ")+"")&&j(w,u),d&1&&_!==(_=c[7].album_name+"")&&j(U,_),d&1&&b!==(b=c[7].date.toLocaleDateString("en-US")+"")&&j(v,b),B===(B=N(c))&&p?p.p(c,d):(p.d(1),p=B(c),p&&(p.c(),p.m(m,null)))},d(c){c&&n(l),p.d()}}}function yt(o){let l,t=Math.abs(o[7].attribute)+"",e;return{c(){l=k("\u2B07 "),e=k(t)},l(a){l=T(a,"\u2B07 "),e=T(a,t)},m(a,i){y(a,l,i),y(a,e,i)},p(a,i){i&1&&t!==(t=Math.abs(a[7].attribute)+"")&&j(e,t)},d(a){a&&n(l),a&&n(e)}}}function At(o){let l=o[7].position+"",t;return{c(){t=k(l)},l(e){t=T(e,l)},m(e,a){y(e,t,a)},p(e,a){a&1&&l!==(l=e[7].position+"")&&j(t,l)},d(e){e&&n(t)}}}function Ht(o){let l,t=o[7].attribute+"",e;return{c(){l=k("\u2B06 "),e=k(t)},l(a){l=T(a,"\u2B06 "),e=T(a,t)},m(a,i){y(a,l,i),y(a,e,i)},p(a,i){i&1&&t!==(t=a[7].attribute+"")&&j(e,t)},d(a){a&&n(l),a&&n(e)}}}function Lt(o){let l,t=o[7].position+"",e;return{c(){l=k("\u{1F5D1} "),e=k(t)},l(a){l=T(a,"\u{1F5D1} "),e=T(a,t)},m(a,i){y(a,l,i),y(a,e,i)},p(a,i){i&1&&t!==(t=a[7].position+"")&&j(e,t)},d(a){a&&n(l),a&&n(e)}}}function Nt(o){let l,t=o[7].position+"",e;return{c(){l=k("\u{1F195} "),e=k(t)},l(a){l=T(a,"\u{1F195} "),e=T(a,t)},m(a,i){y(a,l,i),y(a,e,i)},p(a,i){i&1&&t!==(t=a[7].position+"")&&j(e,t)},d(a){a&&n(l),a&&n(e)}}}function nt(o){let l,t=o[7].playlist===o[2]&&st(o);return{c(){t&&t.c(),l=q()},l(e){t&&t.l(e),l=q()},m(e,a){t&&t.m(e,a),y(e,l,a)},p(e,a){e[7].playlist===e[2]?t?t.p(e,a):(t=st(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&n(l)}}}function Pt(o){let l,t=o[0]&&o[0].length>0&&o[1].length>0&&at(o);return{c(){t&&t.c(),l=q()},l(e){t&&t.l(e),l=q()},m(e,a){t&&t.m(e,a),y(e,l,a)},p(e,[a]){e[0]&&e[0].length>0&&e[1].length>0?t?t.p(e,a):(t=at(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:I,o:I,d(e){t&&t.d(e),e&&n(l)}}}function Ut(o,l,t){let e,a;J(o,Q,E=>t(3,e=E)),J(o,O,E=>t(4,a=E));let i=[],r=[],u;O.subscribe(E=>{Q.subscribe(A=>{console.log(E),E&&A&&E.data.length>0&&A.data.length>0&&(t(0,i=[]),E.data.forEach((_,U)=>{A.data.forEach((P,H)=>{_.playlist==P.playlist&&_.song_id===P.song_id&&(E.data[U].attribute=P.position-_.position,A.data[H].attribute=_.position-P.position)})}),E.data.forEach(_=>{"attribute"in _?t(0,i=[...i,_]):t(0,i=[...i,{..._,attribute:"+"}])}),A.data.forEach(_=>{"attribute"in _||t(0,i=[...i,{..._,attribute:"-"}])}),t(1,r=[...new Set(E.data.map(_=>_.playlist))]))})});function w(){u=dt(this),t(2,u),t(1,r)}return[i,r,u,e,a,w]}class Mt extends ft{constructor(l){super(),ct(this,l,Ut,Pt,ut,{})}}function Rt(o){let l,t,e,a,i;return a=new Mt({}),{c(){l=D("meta"),t=M(),e=D("div"),mt(a.$$.fragment),this.h()},l(r){const u=bt("svelte-pm5yr4",document.head);l=S(u,"META",{name:!0,content:!0}),u.forEach(n),t=R(r),e=S(r,"DIV",{class:!0});var w=L(e);vt(a.$$.fragment,w),w.forEach(n),this.h()},h(){document.title="Playlists",G(l,"name","description"),G(l,"content","Playlists app"),G(e,"class","app")},m(r,u){f(document.head,l),y(r,t,u),y(r,e,u),Et(a,e,null),i=!0},p:I,i(r){i||(gt(a.$$.fragment,r),i=!0)},o(r){kt(a.$$.fragment,r),i=!1},d(r){n(l),r&&n(t),r&&n(e),Tt(a)}}}function Ct(o,l,t){let e,a;return J(o,Q,i=>t(0,e=i)),J(o,O,i=>t(1,a=i)),wt(async()=>{x(O,a=await tt(0),a),x(Q,e=await tt(1),e)}),[]}class Bt extends ft{constructor(l){super(),ct(this,l,Ct,Rt,ut,{})}}export{Bt as default};
